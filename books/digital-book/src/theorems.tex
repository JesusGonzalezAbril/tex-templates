% Theorem System
% The following boxes are provided:
%   Definition:     \defn 
%   Theorem:        \thm 
%   Lemma:          \lem
%   Proposition:    \prop   
%   Corollary:      \cor
%   Claim:          \clm
%   Proof:          \pf
%   Example:        \ex
%   Exercise:       \exer
%   Remark:         \rmk
% Suffix
%   p:              Add a short proof block for Theorem or Lemma
%

% Words to be shown in each box title
\newcommand{\defnword}{Definition}
\newcommand{\thmword}{Theorem}
\newcommand{\lemword}{Lemma}
\newcommand{\propword}{Proposition}
\newcommand{\corword}{Corollary}
\newcommand{\clmword}{Claim}
\newcommand{\proofword}{Proof}
\newcommand{\exword}{Example}
\newcommand{\exerword}{Exercise}
\newcommand{\rmkword}{Remark}


% Definition
\newtcbtheorem[number within=section]{mydefinition}{\defnword}
{
    enhanced,
    frame hidden,
    titlerule=0mm,
    toptitle=1mm,
    bottomtitle=1mm,
    fonttitle=\bfseries\large,
    coltitle=black,
    colbacktitle=green!20!white,
    colback=green!10!white,
}{defn}

\NewDocumentCommand{\defn}{mm+m}{
    \begin{mydefinition}{#1}{#2}
        #3
    \end{mydefinition}
}

% Theorem
\newtcbtheorem[use counter from=mydefinition]{mytheorem}{\thmword}
{
    enhanced,
    frame hidden,
    titlerule=0mm,
    toptitle=1mm,
    bottomtitle=1mm,
    fonttitle=\bfseries\large,
    coltitle=black,
    colbacktitle=cyan!20!white,
    colback=cyan!10!white,
}{thm}

\NewDocumentCommand{\thm}{mm+m}{
    \begin{mytheorem}{#1}{#2}
        #3
    \end{mytheorem}
}

\newenvironment{thmpf}{
	{\noindent{\it \textbf{\proofword}}}
	\tcolorbox[blanker,breakable,left=5mm,parbox=false,
    before upper={\parindent15pt},
    after skip=10pt,
	borderline west={1mm}{0pt}{cyan!20!white}]
}{
    \textcolor{cyan!20!white}{\hbox{}\nobreak\hfill$\blacksquare$} 
    \endtcolorbox
}

\NewDocumentCommand{\thmp}{mm+m+m}{
    \begin{mytheorem}{#1}{#2}
        #3
    \end{mytheorem}

    \begin{thmpf}
        #4
    \end{thmpf}
}

% Lemma
\newtcbtheorem[use counter from=mydefinition]{mylemma}{\lemword}
{
    enhanced,
    frame hidden,
    titlerule=0mm,
    toptitle=1mm,
    bottomtitle=1mm,
    fonttitle=\bfseries\large,
    coltitle=black,
    colbacktitle=violet!20!white,
    colback=violet!10!white,
}{lem}

\NewDocumentCommand{\lem}{mm+m}{
    \begin{mylemma}{#1}{#2}
        #3
    \end{mylemma}
}

\newenvironment{lempf}{
	{\noindent{\it \textbf{\proofword}}}
	\tcolorbox[blanker,breakable,left=5mm,parbox=false,
    before upper={\parindent15pt},
    after skip=10pt,
	borderline west={1mm}{0pt}{violet!20!white}]
}{
    \textcolor{violet!20!white}{\hbox{}\nobreak\hfill$\blacksquare$} 
    \endtcolorbox
}

\NewDocumentCommand{\lemp}{mm+m+m}{
    \begin{mylemma}{#1}{#2}
        #3
    \end{mylemma}

    \begin{lempf}
        #4
    \end{lempf}
}

% Proposition
\newtcbtheorem[use counter from=mydefinition]{myproposition}{\propword}
{
    enhanced,
    frame hidden,
    titlerule=0mm,
    toptitle=1mm,
    bottomtitle=1mm,
    fonttitle=\bfseries\large,
    coltitle=black,
    colbacktitle=yellow!30!white,
    colback=yellow!20!white,
}{prop}

\newenvironment{proppf}{
	{\noindent{\it \textbf{\proofword}}}
	\tcolorbox[blanker,breakable,left=5mm,parbox=false,
    before upper={\parindent15pt},
    after skip=10pt,
	borderline west={1mm}{0pt}{yellow!30!white}]
}{
    \textcolor{yellow!30!white}{\hbox{}\nobreak\hfill$\blacksquare$} 
    \endtcolorbox
}

\NewDocumentCommand{\prop}{mm+m+m}{
    \begin{myproposition}{#1}{#2}
        #3
    \end{myproposition}

    \begin{proppf}
        #4
    \end{proppf}
}

% Corollary
\newtcbtheorem[use counter from=mydefinition]{mycorollary}{\corword}
{
    enhanced,
    frame hidden,
    titlerule=0mm,
    toptitle=1mm,
    bottomtitle=1mm,
    fonttitle=\bfseries\large,
    coltitle=black,
    colbacktitle=orange!20!white,
    colback=orange!10!white,
}{cor}

\newenvironment{corpf}{
	{\noindent{\it \textbf{\proofword}}}
	\tcolorbox[blanker,breakable,left=5mm,parbox=false,
    before upper={\parindent15pt},
    after skip=10pt,
	borderline west={1mm}{0pt}{orange!20!white}]
}{
    \textcolor{orange!20!white}{\hbox{}\nobreak\hfill$\blacksquare$} 
    \endtcolorbox
}

\NewDocumentCommand{\cor}{mm+m+m}{
    \begin{mycorollary}{#1}{#2}
        #3
    \end{mycorollary}

    \begin{corpf}
        #4
    \end{corpf}
}

% Claim
\newtcbtheorem[use counter from=mydefinition]{myclaim}{\clmword}
{
    enhanced,
    frame hidden,
    titlerule=0mm,
    toptitle=1mm,
    bottomtitle=1mm,
    fonttitle=\bfseries\large,
    coltitle=black,
    colbacktitle=pink!30!white,
    colback=pink!20!white,
}{clm}

\newenvironment{clmpf}{
	{\noindent{\it \textbf{\proofword}}}
	\tcolorbox[blanker,breakable,left=5mm,parbox=false,
    before upper={\parindent15pt},
    after skip=10pt,
	borderline west={1mm}{0pt}{pink!30!white}]
}{
    \textcolor{pink!30!white}{\hbox{}\nobreak\hfill$\blacksquare$} 
    \endtcolorbox
}

\NewDocumentCommand{\clm}{m+m+m}{
    \begin{myclaim*}{#1}{}
        #2
    \end{myclaim*}

    \begin{clmpf}
        #3
    \end{clmpf}
}


% Proof
\newenvironment{pfenv}{
	{\noindent{\it \textbf{\proofword}}}
	\tcolorbox[blanker,breakable,left=5mm,parbox=false,
    before upper={\parindent15pt},
    after skip=10pt,
	borderline west={1mm}{0pt}{black!10!white}]
}{
    \textcolor{black!10!white}{\hbox{}\nobreak\hfill$\blacksquare$} 
    \endtcolorbox
}

\NewDocumentCommand{\pf}{+m}{
    \begin{pfenv}
        #1
    \end{pfenv}
}

% Example
\newenvironment{example}{
    \par
    \vspace{5pt}
	\begin{minipage}{\textwidth}
		\noindent\textbf{\exword}
		\tcolorbox[blanker,breakable,left=5mm,parbox=false,
	    before skip=10pt,
	    after skip=10pt,
		borderline west={1mm}{0pt}{cyan!10!white}]
}{
		\endtcolorbox
	\end{minipage}
    \vspace{5pt}
}

\NewDocumentCommand{\ex}{+m}{
    \begin{example}
        #1
    \end{example}
}


% Remark
\newenvironment{remark}{
    \par
    \vspace{5pt}
    \begin{minipage}{\textwidth}
        {\par\noindent{\textbf{\rmkword}}}
        \tcolorbox[blanker,breakable,left=5mm,
        before skip=10pt,after skip=10pt,
        borderline west={1mm}{0pt}{orange!20!white}]
}{
        \endtcolorbox
    \end{minipage}
    \vspace{5pt}
}

\NewDocumentCommand{\rmk}{+m}{
    \begin{remark}
        #1
    \end{remark}
}

% Exercise
\newtcbtheorem[number within=chapter]{myexercise}{\exerword}
{
    enhanced,
    frame hidden,
    titlerule=0mm,
    toptitle=1mm,
    bottomtitle=1mm,
    fonttitle=\bfseries\large,
    coltitle=black,
    colbacktitle=magenta!20!white,
    colback=magenta!10!white,
}{exer}


\NewDocumentCommand{\exer}{+m}{
    \begin{myexercise}{}{}
        #1
    \end{myexercise}
}